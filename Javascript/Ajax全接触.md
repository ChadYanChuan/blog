# Ajax全接触

**AJAX**即“Asynchronous Javascript And XML”（异步JavaScript和XML），是指一种创建交互式网页应用的网页开发技术。  
**AJAX** = 异步 JavaScript和XML（标准通用标记语言的子集）。  
**AJAX** 是一种用于创建快速动态网页的技术。  
**AJAX** 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。  
通过在后台与服务器进行少量数据交换，AJAX 可以使网页实现异步更新。这意味着可以在不重新加载整个网页的情况下，对网页的某部分进行更新。  
传统的网页（不使用 AJAX）如果需要更新内容，必须重载整个网页页面。


## 实现局部更新的基本流程：

* 运用HTML和CSS来实现页面，表达信息；

* 运用XMLHttpRequest和Web服务器进行数据的异步交换；

* 运用JavaScript操作DOM，实现动态局部内容更新。

## XMLHttpRequest 对象

```javascript
var request;
if (window.XMLHttpRequest) {
    // IE7+, Firefox, Chrome, Opera, Safari ...
    request = new XMLHttpRequest();
} else {
    // IE6, IE5
    request = new ActiveXObject('Microsoft.XMLHTTP');
}
```

## HTTP

http是计算机通过网络进行通信的规则。

http是一种无状态协议，即不建立持久的连接。

#### HTTP请求

一个完整的HTTP请求过程，通常有以下7个步骤：

1. 建立TCP连接  
2. 浏览器向Web服务器发送请求命令
3. 浏览器发送请求头信息
4. 服务器应答
5. 服务器发送应答头信息
6. 服务器向浏览器发送数据
7. Web服务器关闭TCP连接

#### 请求 Request

1. HTTP请求的方法或动作，比如GET、POST ...
2. 正在请求的URL，即请求地址
3. 请求头，包含一些客户端环境信息，身份验证信息等
4. 请求体，即请求正文。请求正文中可以包含客户提交的查询字符串、表单数据等等

 **GET** 一般用于信息获取，使用URL传递参数，对所发送信息的数量有限制，一般在2000个字符。GET请求是**幂等**的。 幂等 http://www.i3geek.com/archives/841  
 **POST** 一般用于修改服务器上的资源，对所发送信息的数据大小无限制。

#### 响应 Response

1. 一个由数字和文字组成的状态码，用来显示请求是成功还是失败
2. **响应头**，也和请求头一样包含许多有用的信息，如服务器类型、日期时间、内容类型和长度等等
3. **响应体**，也就是响应正文

HTTP状态码由3位数字构成，其中首位数字定义了状态码的类型：

| 状态码 | 说明 |
| :--: | :-- |
| 1XX | 信息类。表示收到浏览器请求，正在进一步的处理中 |
| 2XX | 成功。表示用户请求被正确接收、理解和处理。如200 OK |
| 3XX | 重定向。表示请求没有成功，客户端必须采取进一步的动作 |
| 4XX | 客户端错误。表示客户端提交的请求有错误。如404 NOT Found |
| 5XX | 服务器错误。表示服务器不能完成对请求的处理。如 500 |

## XMLHTTPRequest发送请求

